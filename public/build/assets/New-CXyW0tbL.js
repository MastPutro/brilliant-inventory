import{G as S,r as p,j as a}from"./app-Bjn5v1rC.js";import{A as B,T as P,S as v}from"./Icons-CqyroUO_.js";import{A as D}from"./AuthLayout-CslI81Fu.js";import{T as k}from"./Table-JrttG2Ft.js";import{T as c}from"./TextInput-D0DmMJqU.js";import{C as x}from"./ComboboxSelect-CvbivoLx.js";import{B as h}from"./Button-Cu1muM6q.js";import{p as m}from"./formats-toZ2nqUc.js";import"./active-element-history-DuYwnnKx.js";function G({auth:b,products:f,distributors:g}){const{data:u,setData:l,post:j,processing:N,errors:n}=S({date:"",distributor:{id:"",name:""},products:[],"distributor.id":null}),[s,d]=p.useState({id:0,name:"",price:0,quantity:1}),[t,o]=p.useState([]),y=()=>{let e=!1;const r=[...t];for(let i=0;i<r.length;i++)r[i].id===s.id&&(r[i].name=s.name,r[i].price=s.price,r[i].quantity=s.quantity,e=!0);e?(o([...r]),l("products",[...r])):(o([...t,s]),l("products",[...t,s]))},w=e=>{const r=[...t];t.forEach((i,C)=>{i.name===e&&r.splice(C,1)}),o(r)},q=e=>{e.preventDefault(),y(),d({id:0,name:"",price:0,quantity:1})},T=()=>{j(route("product-in.add"))};return a.jsxs(D,{user:b.user,children:[a.jsx("h2",{className:"font-semibold text-gray-800 text-2xl mb-6 pt-3",children:"Tambah Barang Masuk"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"flex w-full flex-col gap-3 bg-white p-4 rounded-md",children:[a.jsxs("div",{className:"w-full",children:[a.jsx("p",{className:"text-xl font-medium mb-2",children:"Informasi Transaksi"}),a.jsx("hr",{className:"border border-gray-200"})]}),a.jsx("div",{className:"w-full",children:a.jsx(c,{label:"Tanggal",value:u.date,type:"date",onChange:e=>l("date",e.target.value),errorMsg:n.date,max:new Date().toISOString().split("T")[0],required:!0,autoFocus:!0})}),a.jsx("div",{className:"w-full mb-3",children:a.jsx(x,{label:"Distributor",id:"distributor",errorMsg:n["distributor.id"],options:g,value:u.distributor||{},customValue:!1,placeholder:"Pilih distributor",onChange:e=>l("distributor",{id:e==null?void 0:e.id,name:e==null?void 0:e.name})})}),a.jsxs("div",{className:"sm:col-span-2 md:col-span-3",children:[a.jsx("p",{className:"text-xl font-medium mb-2",children:"Data Barang"}),a.jsx("hr",{className:"border border-gray-200"})]}),a.jsxs("form",{onSubmit:q,className:"space-y-2",children:[a.jsx("div",{className:"w-full",children:a.jsx(x,{label:"Nama Barang",id:"product",errorMsg:n.products,options:f,value:s,placeholder:"Pilih barang",customValue:!1,onChange:e=>d({...s,id:e==null?void 0:e.id,name:e==null?void 0:e.name}),required:!0})}),a.jsx("div",{className:"w-full",children:a.jsx(c,{label:"Harga Beli",value:s.price||"",type:"number",min:0,id:"price",onChange:e=>d({...s,price:+e.target.value}),required:!0})}),a.jsx("div",{className:"w-full mb-3",children:a.jsx(c,{label:"Jumlah",value:s.quantity||"",type:"number",min:1,id:"quantity",onChange:e=>d({...s,quantity:+e.target.value}),required:!0})}),a.jsx("div",{className:"w-full",children:a.jsx(h,{className:"w-full",type:"submit",icon:a.jsx(B,{className:"w-5 h-5"}),disabled:s.id===0&&s.quantity<1,children:"Tambah"})})]})]}),a.jsxs("div",{className:"flex flex-col bg-white p-4 rounded-md md:col-span-2",children:[a.jsxs("div",{className:"w-full mb-2",children:[a.jsx("p",{className:"text-xl font-medium mb-2",children:"Daftar Barang Masuk"}),a.jsx("hr",{className:"border border-gray-200"})]}),a.jsx("div",{className:"w-full",children:a.jsx(k,{header:[{label:"Nama Barang"},{label:"Jumlah"},{label:"Harga"},{label:"Total Harga"},{label:""}],body:t.length?[...t.map(e=>[e.name,e.quantity,m(e.price),m(e.price*e.quantity),a.jsx("button",{className:"text-red-500",onClick:()=>w(e.name),children:a.jsx(P,{className:"w-5 h-5"})})]),["","","Total",`${m(t.reduce((e,r)=>e+r.price*+r.quantity,0))}`,""]]:[]})}),a.jsx("div",{children:t.length>0&&a.jsx(h,{onClick:T,icon:a.jsx(v,{className:"w-5 h-5"}),disabled:N,children:"Simpan"})})]})]})]})}export{G as default};
